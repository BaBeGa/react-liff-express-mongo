{"version":3,"sources":["HomePage.js","logo.svg","App.js","reportWebVitals.js","index.js"],"names":["HomePage","props","getUser","serializedState","localStorage","getItem","user","JSON","parse","setState","console","log","state","fetch","userLineID","then","res","json","e","bind","name","email","pictureUrl","statusMessage","coupons","this","className","width","src","length","map","value","index","details","status","Component","liff","window","App","saveUser","a","stringify","requestOptions","method","headers","body","obj","Object","assign","isRegistered","setItem","init","liffId","isLoggedIn","getProfile","userProfile","getDecodedIDToken","idToken","displayName","userId","login","Button","onClick","variant","size","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.760e0e26.chunk.js","sourcesContent":["import{ Component } from 'react';\r\nimport './HomePage.css';\r\n\r\nclass HomePage extends Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.getUser = this.getUser.bind(this)\r\n        this. state = {\r\n          user: {\r\n            name: '',\r\n            email: '',\r\n            userLineID: '',\r\n            pictureUrl: '',\r\n            statusMessage: '',\r\n            coupons:[]\r\n          }\r\n      };\r\n    }\r\n\r\n    //to get userData and display on home page\r\n    getUser = () => {\r\n      try{\r\n        let serializedState = localStorage.getItem('user');\r\n        if(serializedState){\r\n          this.user = JSON.parse(serializedState);\r\n          this.setState({user: this.user});\r\n        }\r\n        console.log('state : ', this.state);\r\n        console.log('user local : ', this.user);\r\n        fetch('/api/user/'+this.user.userLineID)\r\n        .then(res => res.json())\r\n        .then(user => { console.log('getuser' , user );  this.setState({ user : user })})\r\n      }catch (e){\r\n        console.log('exception : ', e);\r\n      }\r\n    }\r\n\r\n    // getUser(){\r\n    //     let serializedState = localStorage.getItem('user');\r\n    //     if(serializedState){\r\n    //     this.user = JSON.parse(serializedState);\r\n    //     }\r\n    //     console.log('getuser: ', this.user);\r\n    //     this.setState({user : this.user});\r\n    // }\r\n\r\n    componentDidMount() {\r\n        this.getUser()\r\n    }\r\n\r\n    render(){\r\n        return (\r\n        <div className=\"App\">\r\n            <div className=\"support\">\r\n                {\r\n                  (this.state.user.pictureUrl && this.state.user.pictureUrl !== '')\r\n                    ?\r\n                    <img width=\"25%\" src={this.state.user.pictureUrl} />\r\n                    :\r\n                    <p>pictureUrl = null</p>\r\n                }\r\n            </div>\r\n            <div className=\"userData\">\r\n              {\r\n                (this.state.user.name && this.state.user.name !== '')\r\n                  ?\r\n                  <p>Name: {this.state.user.name}</p>\r\n                  :\r\n                  <p>Name = null</p>\r\n              }\r\n              {\r\n                (this.state.user.email && this.state.user.email !== '')\r\n                  ?\r\n                  <p>e-mail: {this.state.user.email}</p>\r\n                  :\r\n                  <p>email = null</p>\r\n              }\r\n              {\r\n                (this.state.user.userLineID && this.state.user.userLineID !== '')\r\n                  ?\r\n                  <p>LineID: {this.state.user.userLineID}</p>\r\n                  :\r\n                  <p>LineID = null</p>\r\n              }\r\n              {\r\n                (this.state.user.statusMessage && this.state.user.statusMessage !== '')\r\n                  ?\r\n                  <p>statusMessage: {this.state.user.statusMessage}</p>\r\n                  :\r\n                  <p>statusMessage = null</p>\r\n              }\r\n              {\r\n                (this.state.user.coupons && this.state.user.coupons.length > 0) \r\n                ?\r\n                this.state.user.coupons.map((value, index) => {\r\n                  return <p key={index}> Coupon : {index}, details: {value.details}, status : {value.status}</p>\r\n                })\r\n                :\r\n                <p>no coupons</p>\r\n              }\r\n\r\n              </div>\r\n        </div>\r\n        );\r\n      }\r\n}\r\n\r\nexport default HomePage;","export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","import logo from './logo.svg';\r\nimport React, { Component } from 'react';\r\nimport './App.css';\r\nimport HomePage from './HomePage';\r\nimport { Button } from 'react-bootstrap';\r\n\r\nconst liff = window.liff;\r\n\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.saveUser = this.saveUser.bind(this)\r\n    this.state = {\r\n      user: {\r\n        name: '',\r\n        email: '',\r\n        userLineID: '',\r\n        pictureUrl: '',\r\n        statusMessage: ''\r\n      }\r\n    };\r\n  }\r\n\r\n  getProfile() {\r\n    let serializedState = localStorage.getItem('user');\r\n    if(serializedState){\r\n      this.user = JSON.parse(serializedState);\r\n      this.setState({user: this.user});\r\n    }\r\n\r\n    console.log('user : ', this.user);\r\n    if(!this.user){\r\n      liff.init({ liffId: \"1655424183-wzDgvLRj\" } ,async () => {\r\n        if (liff.isLoggedIn()) {\r\n          let userProfile = await liff.getProfile();\r\n          let idToken = await liff.getDecodedIDToken();\r\n          this.setState({\r\n            user : {\r\n              name: userProfile.displayName,\r\n              email: idToken.email,\r\n              userLineID: userProfile.userId,\r\n              pictureUrl: userProfile.pictureUrl,\r\n              statusMessage: userProfile.statusMessage\r\n            }\r\n          });\r\n          console.log('liff done : ', this.state.user);\r\n        } else {\r\n          liff.login();\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  saveUser = async () =>{\r\n\r\n    try{\r\n      // POST request using fetch with async/await\r\n    console.log('state : ',this.state);\r\n    var user = JSON.stringify(this.state.user)\r\n    console.log('user state : ',user);\r\n    const requestOptions = {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: user\r\n    };\r\n    const response = await fetch('/api/user', requestOptions);\r\n    \r\n    const obj = Object.assign({isRegistered: true}, this.state.user)\r\n    localStorage.setItem('user', JSON.stringify(obj));\r\n    this.setState({user: obj});\r\n    console.log('registered : ',obj);\r\n\r\n    }catch (e){\r\n      console.log('exception : ');\r\n    }\r\n    \r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getProfile()\r\n    //this.getList()\r\n  }\r\n\r\n  render(){\r\n    if(this.state.user.isRegistered){\r\n      return(\r\n        <div>\r\n          <HomePage/>\r\n        </div>\r\n      );\r\n    }\r\n    else{\r\n      return (\r\n        <div className=\"App\">\r\n          <div className=\"support\">\r\n              {\r\n                (this.state.user && this.state.user.pictureUrl && this.state.user.pictureUrl !== '')\r\n                  ?\r\n                  <img width=\"25%\" src={this.state.user.pictureUrl} />\r\n                  :\r\n                  <p>pictureUrl = null</p>\r\n              }\r\n          </div>\r\n          <div className=\"userData\">\r\n            {\r\n              (this.state.user && this.state.user.name && this.state.user.name !== '')\r\n                ?\r\n                <p>Name: {this.state.user.name}</p>\r\n                :\r\n                <p>Name = null</p>\r\n            }\r\n            {\r\n              (this.state.user && this.state.user.email && this.state.user.email !== '')\r\n                ?\r\n                <p>e-mail: {this.state.user.email}</p>\r\n                :\r\n                <p>email = null</p>\r\n            }\r\n            {\r\n              ( this.state.user && this.state.user.userLineID && this.state.user.userLineID !== '')\r\n                ?\r\n                <p>LineID: {this.state.user.userLineID}</p>\r\n                :\r\n                <p>LineID = null</p>\r\n            }\r\n            {\r\n              (this.state.user && this.state.user.statusMessage && this.state.user.statusMessage !== '')\r\n                ?\r\n                <p>statusMessage: {this.state.user.statusMessage}</p>\r\n                :\r\n                <p>statusMessage = null</p>\r\n            }\r\n            </div>\r\n            <div className=\"button login\">\r\n              <Button onClick={this.saveUser} variant=\"warning\" size=\"lg\">Register</Button>\r\n            </div>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <BrowserRouter>\r\n    <App />\r\n  </BrowserRouter>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}