{"version":3,"sources":["HomePage.js","logo.svg","App.js","reportWebVitals.js","index.js"],"names":["HomePage","props","getUser","serializedState","localStorage","getItem","user","JSON","parse","setState","console","log","state","fetch","userLineID","then","res","json","e","bind","name","email","pictureUrl","statusMessage","coupons","this","className","width","src","map","value","index","details","status","Component","liff","window","App","saveUser","a","stringify","requestOptions","method","headers","body","response","data","setItem","init","liffId","isLoggedIn","getProfile","userProfile","getDecodedIDToken","idToken","displayName","userId","login","Button","onClick","variant","size","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.f7c45c20.chunk.js","sourcesContent":["import{ Component } from 'react';\r\nimport './HomePage.css';\r\n\r\nclass HomePage extends Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.getUser = this.getUser.bind(this)\r\n        this. state = {\r\n          user: {\r\n            name: '',\r\n            email: '',\r\n            userLineID: '',\r\n            pictureUrl: '',\r\n            statusMessage: '',\r\n            coupons:[]\r\n          }\r\n      };\r\n    }\r\n\r\n    //to get userData and display on home page\r\n    getUser = () => {\r\n      try{\r\n        let serializedState = localStorage.getItem('user');\r\n        if(serializedState){\r\n          this.user = JSON.parse(serializedState);\r\n          this.setState({user: this.user});\r\n        }\r\n        console.log('state : ', this.state);\r\n        console.log('user local : ', this.user);\r\n        fetch('/api/user/'+this.user.userLineID)\r\n        .then(res => res.json())\r\n        .then(user => { console.log('getuser' , user );  this.setState({ user : user })})\r\n      }catch (e){\r\n        console.log('exception : ', e);\r\n      }\r\n    }\r\n\r\n    // getUser(){\r\n    //     let serializedState = localStorage.getItem('user');\r\n    //     if(serializedState){\r\n    //     this.user = JSON.parse(serializedState);\r\n    //     }\r\n    //     console.log('getuser: ', this.user);\r\n    //     this.setState({user : this.user});\r\n    // }\r\n\r\n    componentDidMount() {\r\n        this.getUser()\r\n    }\r\n\r\n    render(){\r\n        return (\r\n        <div className=\"App\">\r\n            <div className=\"support\">\r\n                {\r\n                  (this.state.user.pictureUrl && this.state.user.pictureUrl !== '')\r\n                    ?\r\n                    <img width=\"25%\" src={this.state.user.pictureUrl} />\r\n                    :\r\n                    <p>pictureUrl = null</p>\r\n                }\r\n            </div>\r\n            <div className=\"userData\">\r\n              {\r\n                (this.state.user.name && this.state.user.name !== '')\r\n                  ?\r\n                  <p>Name: {this.state.user.name}</p>\r\n                  :\r\n                  <p>Name = null</p>\r\n              }\r\n              {\r\n                (this.state.user.email && this.state.user.email !== '')\r\n                  ?\r\n                  <p>e-mail: {this.state.user.email}</p>\r\n                  :\r\n                  <p>email = null</p>\r\n              }\r\n              {\r\n                (this.state.user.userLineID && this.state.user.userLineID !== '')\r\n                  ?\r\n                  <p>LineID: {this.state.user.userLineID}</p>\r\n                  :\r\n                  <p>LineID = null</p>\r\n              }\r\n              {\r\n                (this.state.user.statusMessage && this.state.user.statusMessage !== '')\r\n                  ?\r\n                  <p>statusMessage: {this.state.user.statusMessage}</p>\r\n                  :\r\n                  <p>statusMessage = null</p>\r\n              }\r\n              {\r\n                this.state.user.coupons.map((value, index) => {\r\n                  return <p key={index}> details: {value.details}, status : {value.status}</p>\r\n                })\r\n              }\r\n\r\n              </div>\r\n        </div>\r\n        );\r\n      }\r\n}\r\n\r\nexport default HomePage;","export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","import logo from './logo.svg';\nimport React, { Component } from 'react';\nimport './App.css';\nimport HomePage from './HomePage';\nimport { Button } from 'react-bootstrap';\n\nconst liff = window.liff;\n\nclass App extends Component {\n  \n  constructor(props) {\n    super(props);\n    this.saveUser = this.saveUser.bind(this)\n    this.state = {\n      user: {\n        name: '',\n        email: '',\n        userLineID: '',\n        pictureUrl: '',\n        statusMessage: ''\n      }\n    };\n  }\n\n  getProfile() {\n    let serializedState = localStorage.getItem('user');\n    if(serializedState){\n      this.user = JSON.parse(serializedState);\n      this.setState({user: this.user});\n    }\n\n    console.log('user : ', this.user);\n    if(!this.user){\n      liff.init({ liffId: \"1655424183-wzDgvLRj\" } ,async () => {\n        if (liff.isLoggedIn()) {\n          let userProfile = await liff.getProfile();\n          let idToken = await liff.getDecodedIDToken();\n          this.setState({\n            user : {\n              name: userProfile.displayName,\n              email: idToken.email,\n              userLineID: userProfile.userId,\n              pictureUrl: userProfile.pictureUrl,\n              statusMessage: userProfile.statusMessage\n            }\n          });\n          console.log('liff done : ', this.state.user);\n        } else {\n          liff.login();\n        }\n      });\n    }\n  }\n\n  saveUser = async () =>{\n\n    try{\n      // POST request using fetch with async/await\n    console.log('state : ',this.state);\n    var user = JSON.stringify(this.state.user)\n    console.log('user state : ',user);\n    const requestOptions = {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: user\n    };\n    const response = await fetch('/api/user', requestOptions);\n    const data = await response.json();\n    console.log('response : ',data);\n    \n    let serializedState = JSON.stringify(this.state.user);\n    localStorage.setItem('user', serializedState);\n    }catch (e){\n      console.log('exception : ',e);\n    }\n    \n  }\n\n  componentDidMount() {\n    this.getProfile()\n    //this.getList()\n  }\n\n  render(){\n    if(this.user){\n      return(\n        <div>\n          <HomePage/>\n        </div>\n      );\n    }\n    else{\n      return (\n        <div className=\"App\">\n          <div className=\"support\">\n              {\n                (this.state.user && this.state.user.pictureUrl && this.state.user.pictureUrl !== '')\n                  ?\n                  <img width=\"25%\" src={this.state.user.pictureUrl} />\n                  :\n                  <p>pictureUrl = null</p>\n              }\n          </div>\n          <div className=\"userData\">\n            {\n              (this.state.user && this.state.user.name && this.state.user.name !== '')\n                ?\n                <p>Name: {this.state.user.name}</p>\n                :\n                <p>Name = null</p>\n            }\n            {\n              (this.state.user && this.state.user.email && this.state.user.email !== '')\n                ?\n                <p>e-mail: {this.state.user.email}</p>\n                :\n                <p>email = null</p>\n            }\n            {\n              ( this.state.user && this.state.user.userLineID && this.state.user.userLineID !== '')\n                ?\n                <p>LineID: {this.state.user.userLineID}</p>\n                :\n                <p>LineID = null</p>\n            }\n            {\n              (this.state.user && this.state.user.statusMessage && this.state.user.statusMessage !== '')\n                ?\n                <p>statusMessage: {this.state.user.statusMessage}</p>\n                :\n                <p>statusMessage = null</p>\n            }\n            </div>\n            <div className=\"button login\">\n              <Button onClick={this.saveUser} variant=\"warning\" size=\"lg\">Register</Button>\n            </div>\n        </div>\n      );\n    }\n  }\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <BrowserRouter>\n    <App />\n  </BrowserRouter>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}